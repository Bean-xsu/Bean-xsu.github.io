(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{422:function(t,a,s){"use strict";s.r(a);var e=s(7),r=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"全局事件总线-globaleventbus"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局事件总线-globaleventbus"}},[t._v("#")]),t._v(" 全局事件总线（GlobalEventBus）")]),t._v(" "),a("h2",{attrs:{id:"定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定义"}},[t._v("#")]),t._v(" 定义")]),t._v(" "),a("p",[t._v("一种组件间通信方式，适用于："),a("font",{attrs:{color:"red"}},[t._v("任意组件间通信")])],1),t._v(" "),a("h2",{attrs:{id:"示例图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例图"}},[t._v("#")]),t._v(" 示例图")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Hiyiin/picture/Typora/image-20220628153231710.png",alt:"image-20220628153231710"}})]),t._v(" "),a("h2",{attrs:{id:"原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[t._v("#")]),t._v(" 原理")]),t._v(" "),a("p",[t._v("通过在Vue原型对象上定义一个所有其他组件都能看到的组件，所有组件通过调用这个组件上的"),a("code",[t._v("$on")]),t._v("绑定自定义事件和"),a("code",[t._v("$emit")]),t._v("触发自定义事件就可以实现任意组件间通信。")]),t._v(" "),a("h2",{attrs:{id:"安装全局事件总线"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装全局事件总线"}},[t._v("#")]),t._v(" 安装全局事件总线")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[t._v("new Vue({\n    ...\n    beforeCreate() {\n        Vue.prototype.$bus = this //安装全局事件总线\n    },\n\t...\n})\n")])])]),a("h2",{attrs:{id:"使用全局事件总线"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用全局事件总线"}},[t._v("#")]),t._v(" 使用全局事件总线")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("接收数据：A组件想要接收数据，则在A组件中给"),a("code",[t._v("$bus")]),t._v("绑定自定义事件，事件的"),a("font",{attrs:{color:"red"}},[t._v("回调留在A组件自身")])],1),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[t._v("methods:{\n\tdemo(data){\n\t\tconsole.log('我是School，我收到了数据：', data);\n\t}\n}\nmounted() {\n    this.$bus.$on('xxx', this.demo)\n},\nbeforeDestroy() {\n    this.$bus.$off('hello')\n},\n")])])])]),t._v(" "),a("li",[a("p",[t._v("提供数据："),a("code",[t._v("this.$bus.$emit('xxx',数据)")])])]),t._v(" "),a("li",[a("p",[t._v("最好在beforeDestroy钩子中，用$off解绑"),a("font",{attrs:{color:"red"}},[t._v("当前组件所用到的")]),t._v("事件")],1)])])])}),[],!1,null,null,null);a.default=r.exports}}]);