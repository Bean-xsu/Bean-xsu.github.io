---
title: 解决开发环境中的ajax跨域请求问题
date: 2022-07-07 22:37:37
permalink: /pages/bd5f7c/
categories:
  - Vue学习笔记
  - Vue中的ajax请求
tags:
  - Vue
  - ajax
  - 代理服务器
---
# 解决开发环境中的ajax跨域请求问题

## 跨域请求问题

我们知道服务器与服务器之间是不存在跨域请求的问题的，但一般在项目中是不允许进行跨域请求的，若要进行跨域请求，就需要借助一台代理服务器了，在进行跨域请求时，我们的请求如果直接发给目标服务器，目标服务器会返回一段具有特殊响应头的响应体数据，那么返回的数据是无法解析的，这时候就需要在本项目的端口配置一台代理服务器，先将请求发送给代理服务器，再又代理服务器转发到目标服务器，然后将代理服务器响应的数据处理后转发到本机服务器。

## 使用vue脚手架配置代理服务器

### 方法一

在vue.config.js中添加如下配置

```js
devServer:{
    proxy: 'http://localhost:5000'
}
```

**注意：**

- 优点：配置简单，请求资源时直接转发给前端(8080)即可
- 缺点：不能配置多个代理，不能灵活的控制请求是否走代理
- 工作方式：若按照上述方法配置代理，会优先匹配前端资源，当请求了前端不存在的资源时，才会将该请求转发给目标服务器。

### 方法二

编写vue.config.js配置具体代理规则

```js
devServer: {
    proxy: {
        '/api1': {//配置所有以'/api'开头的请求路径
        	target: 'http://localhost:5000',//代理服务器的基础路径
        	pathRewrite: { "^/api1": "" },//路径重写：将所有路径前缀改为空字符串
        	ws: true, //用于支持web-socket网络套接字
        	changeOrigin: true //用于控制请求头中的host值
        },
        '/xbf2': {
        	pathRewrite: { "^/xbf2": "" },
        	target: 'http://localhost:5001'
        }
    }
}
```

**注意：**

- 优点：可以配置多个代理，且可以灵活的控制请求是否走代理
- 缺点：配置略微繁琐，请求资源时必须加前缀 
